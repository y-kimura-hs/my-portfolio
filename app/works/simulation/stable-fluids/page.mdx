{/*
---
title: "Realtime Stable Fluids"
date: "2023-12-10"
year: "2023"
category: "Simulation"
tags: ["WebGL", "Physics", "Fluids"]
description: "WebGLを用いたリアルタイム流体シミュレーション"
color: "from-blue-600 to-cyan-400"
---
*/}

import PageLayout from '@/components/layout/PageLayout'
import ViewCanvas2D from '@/components/canvas/ViewCanvas2D'
import Box from '@/components/canvas/Box'
import Particles from '@/components/canvas/Particles'
import Link from 'next/link'
import WorkNavigation from '@/components/works/WorkNavigation'
import FluidSimulation from '@/components/canvas/fluids/simulation'

<PageLayout 
  title="Realtime Stable Fluids" 
  description="WebGLを用いたリアルタイム流体シミュレーション"
  tags={["WebGL", "Physics", "Fluids"]}
  tagBasePath="/works"
>

{/* --- デモセクション --- */}
<ViewCanvas2D>
  <FluidSimulation />
</ViewCanvas2D>


{/* --- 解説セクション --- */}
<div className="mt-12">
  
  <article>
    ## プロジェクト概要

    試作として，有名なStable FluidsのデモをWebGLで実装してみました．
    非圧縮性ナビエ・ストークス方程式を数値的に安定して解くことで，リアルタイムに煙のような流体の挙動をシミュレートします．
    マウス操作により煙を流入できます．

    ### 実装したソルバの流れ

    シミュレーションは以下のステップで実行されます．
    各ステップはフラグメントシェーダーとして実装され，FBO（Frame Buffer Object）を介してデータを受け渡します．

    1. **Advection (移流)**: 
      セミラグランジュ法で計算します．
      現在の速度場に従って過去の位置をバックトレースし，物理量（速度・密度）を移動させます．
      とても安定しますが，数値拡散によりディテールが失われやすいです．
    
    2. **External Forces (外力)**:
      マウス入力による力，重力に加え，数値拡散を補うための **Vorticity Confinement (渦度閉じ込め)** を適用します
      （閉じ込めって，なんかダサい和訳だよねっていつも思う）．
      これにより，乱流のような細かい渦の動きを維持します．
    
    3. **Projection (射影)**:
       速度場から発散成分を取り除き，非圧縮性を満たすように補正します．
       - **Divergence**: 速度場の発散を計算．
       - **Pressure Solve**: 圧力場のポアソン方程式を，ヤコビ法 (Jacobi Iteration) を用いて反復計算で解きます．
       - **Gradient Subtract**: 計算された圧力勾配を元の速度場から減算し，Divergence-freeな速度場を得ます．

    ### 参考文献

    - **Stable Fluids**
      - Jos Stam, "Stable Fluids", SIGGRAPH 99, 1999.
      - [PDF Link](https://pages.cs.wisc.edu/~chaol/data/cs777/stam-stable_fluids.pdf)
    - **Vorticity Confinement**
      - Ronald Fedkiw, Jos Stam, and Henrik Wann Jensen, "Visual Simulation of Smoke", SIGGRAPH 2001.
      - [PDF Link](https://web.stanford.edu/class/cs237d/smoke.pdf)

  </article>

  {/* <aside className="space-y-8">
    <div className="bg-card p-6 rounded-xl border border-border">
      <h3 className="font-bold text-txt-main mb-4">Tech Stack</h3>
      <ul className="space-y-2 text-sm text-txt-muted">
        <li className="flex items-center"><span className="w-2 h-2 bg-blue-500 rounded-full mr-2"></span>Three.js</li>
        <li className="flex items-center"><span className="w-2 h-2 bg-purple-500 rounded-full mr-2"></span>GLSL (Fragment Shader)</li>
        <li className="flex items-center"><span className="w-2 h-2 bg-green-500 rounded-full mr-2"></span>React Three Fiber</li>
      </ul>
    </div>
    
    <div className="bg-card p-6 rounded-xl border border-border">
      <h3 className="font-bold text-txt-main mb-4">Links</h3>
      <a href="#" className="block text-primary hover:underline text-sm mb-2">View on GitHub ↗</a>
    </div>
  </aside> */}

</div>

<WorkNavigation currentSlug="stable-fluids" />

</PageLayout>